<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ambient Video/Audio Player</title>
   <link rel="stylesheet" href="style.css">
</head>
<body>

  <input type="file" id="upload" accept="video/*,audio/*">
  <div class="video-wrapper">
  <video id="player" controls></video>
</div>

  <canvas id="canvas" width="100" height="100"></canvas>

  <script>
    const upload = document.getElementById("upload");
    const video = document.getElementById("player");
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    upload.addEventListener("change", (e) => {
      const file = e.target.files[0];
      if (file) {
        const url = URL.createObjectURL(file);
        if (file.type.startsWith("video")) {
          video.src = url;
          video.style.display = "block";
        } else if (file.type.startsWith("audio")) {
          video.src = url;
          video.style.display = "none";
        }
        video.play();
      }
    });

    function getAverageColor(video) {
      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
      const frame = ctx.getImageData(0, 0, canvas.width, canvas.height);
      const len = frame.data.length;
      let r = 0, g = 0, b = 0;
      let count = 0;
      for (let i = 0; i < len; i += 4) {
        r += frame.data[i];
        g += frame.data[i + 1];
        b += frame.data[i + 2];
        count++;
      }
      r = Math.floor(r / count);
      g = Math.floor(g / count);
      b = Math.floor(b / count);
      return `rgb(${r}, ${g}, ${b})`;
    }

    function updateAmbientGlow() {
      if (!video.paused && !video.ended) {
        const color = getAverageColor(video);
       document.querySelector(".video-wrapper").style.boxShadow =
  `0 0 60px 10px ${color}`;
        
      }
      requestAnimationFrame(updateAmbientGlow);
    }

    video.addEventListener("play", () => {
      updateAmbientGlow();
    });
  </script>

</body>
</html>
